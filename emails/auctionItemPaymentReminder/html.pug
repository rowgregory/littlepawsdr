<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: #333;
                background-color: #f5f5f5;
                margin: 0;
                padding: 0;
            }
            .container {
                max-width: 600px;
                margin: 0 auto;
                background-color: #ffffff;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 40px 20px;
                text-align: center;
            }
            .header h1 {
                margin: 0;
                font-size: 28px;
                font-weight: 700;
            }
            .header p {
                margin: 10px 0 0 0;
                font-size: 14px;
                opacity: 0.9;
            }
            .content {
                padding: 40px 20px;
            }
            .greeting {
                font-size: 16px;
                margin-bottom: 20px;
            }
            .alert {
                background-color: #fff3cd;
                border-left: 4px solid #ffc107;
                padding: 15px;
                margin: 20px 0;
                border-radius: 4px;
            }
            .alert p {
                margin: 0;
                color: #856404;
                font-weight: 500;
            }
            .items-section {
                margin: 30px 0;
            }
            .items-section h2 {
                font-size: 18px;
                color: #333;
                margin-bottom: 15px;
                border-bottom: 2px solid #667eea;
                padding-bottom: 10px;
            }
            .item {
                background-color: #f9f9f9;
                border-left: 4px solid #667eea;
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 4px;
            }
            .item-name {
                font-weight: 600;
                color: #333;
                margin-bottom: 5px;
            }
            .item-price {
                color: #667eea;
                font-size: 16px;
                font-weight: 700;
            }
            .pricing {
                background-color: #f5f5f5;
                padding: 20px;
                border-radius: 4px;
                margin: 30px 0;
            }
            .pricing-row {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
                font-size: 14px;
            }
            .pricing-row.total {
                border-top: 2px solid #ddd;
                padding-top: 10px;
                font-weight: 700;
                font-size: 16px;
                color: #333;
            }
            .cta-button {
                display: inline-block;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 12px 30px;
                text-decoration: none;
                border-radius: 4px;
                font-weight: 600;
                margin: 30px 0;
            }
            .cta-button:hover {
                opacity: 0.9;
            }
            .footer {
                background-color: #f9f9f9;
                padding: 20px;
                text-align: center;
                border-top: 1px solid #ddd;
                font-size: 12px;
                color: #666;
            }
            .footer a {
                color: #667eea;
                text-decoration: none;
            }
            .help-text {
                background-color: #e8f4f8;
                border-left: 4px solid #17a2b8;
                padding: 15px;
                margin: 20px 0;
                border-radius: 4px;
                font-size: 14px;
                color: #0c5460;
            }
        </style>
    </head>
    <body>
        <div class="container">
            {/* Header */}
            <div class="header">
                <h1>üéâ Payment Reminder</h1>
                <p>Complete your auction purchase</p>
            </div>

            {/* Content */}
            <div class="content">
                <div class="greeting">
                    <p>Hi #{userName},</p>
                    <p>Thank you for winning items in our recent auction! We're excited to get your winnings to you, but we need payment to complete the process.</p>
                </div>

                {/* Alert */}
                <div class="alert">
                    <p>‚è∞ This is a reminder that payment is due. Don't miss out on your items!</p>
                </div>

                {/* Items Section */}
                <div class="items-section">
                    <h2>Your Winning Items (#{itemCount})</h2>
                    - each(item in items)
                        .item
                            .item-name= item.name
                            if item.photos && item.photos.length > 0
                                img(src=item.photos[0].url, alt=item.name, style="width: 100%; height: auto; border-radius: 4px; margin-top: 8px; max-height: 150px; object-fit: cover;")
                            .item-price= '$' + item.currentBid.toFixed(2)
                </div>

                {/* Pricing Summary */}
                <div class="pricing">
                    <div class="pricing-row">
                        <span>Subtotal:</span>
                        <span>= '$' + subtotal.toFixed(2)</span>
                    </div>
                    <div class="pricing-row">
                        <span>Shipping:</span>
                        <span>= '$' + shipping.toFixed(2)</span>
                    </div>
                    <div class="pricing-row total">
                        <span>Total Due:</span>
                        <span>= '$' + totalPrice.toFixed(2)</span>
                    </div>
                </div>

                {/* CTA Button */}
                <div style="text-align: center;">
                    <a(href=paymentLink, class="cta-button") Complete Payment Now
                </div>

                {/* Help Text */}
                <div class="help-text">
                    <p><strong>Having trouble?</strong></p>
                    <p>If you have any questions about your purchase or need help completing payment, please don't hesitate to reach out to our support team.</p>
                </div>

                {/* Footer Message */}
                <p style="margin-top: 30px; font-size: 14px; color: #666;">
                    Thank you for supporting Little Paws Dachshund Rescue! Every purchase helps us rescue and care for dachshunds in need. üêï
                </p>
            </div>

            {/* Footer */}
            <div class="footer">
                <p>Little Paws Dachshund Rescue</p>
                <p>
                    <a(href="https://www.littlepawsdr.org") Visit Website
                    | <a(href="mailto:support@littlepawsdr.org") Contact Support
                </p>
                <p style="margin-top: 15px; color: #999;">This is an automated reminder email. Please do not reply to this address.</p>
            </div>
        </div>
    </body>
</html>